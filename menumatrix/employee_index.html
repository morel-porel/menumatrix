<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Employee Index</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicons -->
    <link href="img/favicon.ico" rel="icon">
    <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600|Pacifico" rel="stylesheet"> 

    <!-- Bootstrap CSS File -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="vendor/animate/animate.min.css" rel="stylesheet">
    <link href="vendor/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="vendor/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Main Stylesheet File -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Top Header Start -->
    <section id="top-header">
        <div class="logo">
            <img src="img/logo.png" />
        </div>
    </section>
    <!-- Top Header End -->

    <!-- Header Start -->
    <header id="header">
        <div class="container">
            <nav id="nav-menu-container">
                <ul class="nav-menu">
                    <li class="menu-active"><a href="">Attendance</a></li>
                    <li><a href="totalExpenses.html">Expenses</a></li>                     
                    <li><a href="#" id="logoutLink">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- Header End -->

    <!-- Attendance Section Start -->
    <section id="reservations">
        <div class="container">
            <header class="section-header">
                <h3>Attendance</h3>
            </header>
            <div class="row">
                <div class="col-md-12">
                    <form id="attendanceForm" action="addAttendanceHandler.php" method="post">
                        <div class="form-row">
                            <div class="control-group col-sm-3">
                                <div class="form-group">
                                    <div class="input-group date" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="date" name="attendanceDate" placeholder="Date" data-target="#date"/>
                                        <div class="input-group-append" data-target="#date" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group col-sm-3">
                                <div class="form-group">
                                    <div class="input-group date" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="timein" name="attendanceTimeIn" placeholder="Time in" data-target="#timein"/>
                                        <div class="input-group-append" data-target="#timein" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group col-sm-3">
                                <div class="form-group">
                                    <div class="input-group date"data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input"  id="timeout" name="attendanceTimeOut" placeholder="Time out" data-target="#timeout"/>
                                        <div class="input-group-append" data-target="#timeout" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group col-sm-3">
                                <div class="form-group">
                                    <input type="number" class="form-control rounded-pill"  id="hoursworked" name="attendanceHoursWorked" placeholder="Hours Worked">
                                </div>
                            </div>
                            <div class="control-group col-sm-3 d-flex justify-content-center">
                                <button class="btn btn-block btn-book">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- Attendance Section End -->

    <!-- Logout Modal -->
    <div id="logoutModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
        <div style="background-color:white; padding:40px; border-radius:8px; box-shadow:0 0 20px rgba(0,0,0,0.1); text-align:center; max-width:500px; width:90%;">
            <h2 style="color:#333; margin-bottom:30px; font-weight:600;">Are you sure you want to log out?</h2>
            <div style="margin-top:30px; display:flex; justify-content:center; gap:15px;">
                <button id="confirmLogout" style="padding:12px 25px; border:none; border-radius:4px; cursor:pointer; font-weight:500; background-color:#45e7fa; color:white;">
                    <i class="fa fa-sign-out"></i> Yes, Logout
                </button>
                <button id="cancelLogout" style="padding:12px 25px; border:none; border-radius:4px; cursor:pointer; font-weight:500; background-color:#6c757d; color:white;">
                    <i class="fa fa-times"></i> No, Cancel
                </button>
            </div>
        </div>
    </div>
    
    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/jquery/jquery-migrate.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="vendor/easing/easing.min.js"></script>
    <script src="vendor/stickyjs/sticky.js"></script>
    <script src="vendor/superfish/hoverIntent.js"></script>
    <script src="vendor/superfish/superfish.min.js"></script>
    <script src="vendor/owlcarousel/owl.carousel.min.js"></script>
    <script src="vendor/tempusdominus/js/moment.min.js"></script>
    <script src="vendor/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="vendor/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Main Javascript File -->
    <script src="js/main.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize datetimepickers
        $('#date').datetimepicker({
            format: 'L' // MM/DD/YYYY
        });
        $('#timein').datetimepicker({
            format: 'LT' // HH:MM AM/PM
        });
        $('#timeout').datetimepicker({
            format: 'LT' // HH:MM AM/PM
        });
        
        // Calculate hours worked automatically
        $('#timein, #timeout').on('change.datetimepicker', function() {
            const timeIn = $('#timein').datetimepicker('viewDate');
            const timeOut = $('#timeout').datetimepicker('viewDate');
            
            if (timeIn && timeOut) {
                const diffMs = timeOut - timeIn;
                const diffHrs = diffMs / (1000 * 60 * 60);
                $('#hoursworked').val(diffHrs.toFixed(2));
            }
        });

        // Logout modal handling
        const logoutLink = document.getElementById('logoutLink');
        const logoutModal = document.getElementById('logoutModal');
        const confirmLogout = document.getElementById('confirmLogout');
        const cancelLogout = document.getElementById('cancelLogout');
        
        if (logoutLink) {
            logoutLink.addEventListener('click', function(e) {
                e.preventDefault();
                logoutModal.style.display = 'flex';
            });
        }
        
        if (cancelLogout) {
            cancelLogout.addEventListener('click', function() {
                logoutModal.style.display = 'none';
            });
        }
        
        if (confirmLogout) {
            confirmLogout.addEventListener('click', function() {
                window.location.href = 'logoutHandler.php';
            });
        }
    });
    </script>
</body>
</html>